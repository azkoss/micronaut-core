apply plugin: 'com.github.johnrengelman.plugin-shadow'


shadowJar {
    dependencies {
        exclude(dependency(group:'org.reactivestreams', name:'reactive-streams', version:'1.0.1'))
        exclude(dependency(group:'com.google.code.findbugs',name:'jsr305',version:'3.0.2'))
    }
    relocate "org.objectweb.asm", "io.micronaut.asm"
    relocate "com.github.benmanes.caffeine", "io.micronaut.caffeine"
}

tasks.withType(com.github.jengelman.gradle.plugins.shadow.tasks.ConfigureShadowRelocation) { t ->
    t.enabled = false
}

dependencies {
    shadowCompile group:'org.reactivestreams', name:'reactive-streams', version:'1.0.1'
    shadowCompile group:'com.google.code.findbugs',name:'jsr305',version:'3.0.2'

    compile group:'org.reactivestreams', name:'reactive-streams', version:'1.0.1'
    compile group:'com.google.code.findbugs',name:'jsr305',version:'3.0.2'
    compile group:'org.ow2.asm', name: 'asm', version:asmVersion
    compile group:'org.ow2.asm', name: 'asm-commons', version:asmVersion
    compile group:'org.ow2.asm', name: 'asm-tree', version:asmVersion
    compile group:'com.github.ben-manes.caffeine',name:'caffeine', version: caffeineVersion
}